<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Levofloxacin Adult & Pediatric Dosing + PK Calculator</title>

<style>
:root{
  --primary:#0b4f6c;
  --danger:#c62828;
  --light:#f5f6f8;
  --border:#d6d6d6;
}
body{margin:0;font-family:system-ui;background:var(--light)}
header{background:var(--primary);color:#fff;padding:1rem 1.5rem;font-size:1.3rem}
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1.2rem;max-width:1400px;margin:1.5rem auto;padding:0 1rem}
.card{background:#fff;border:1px solid var(--border);border-radius:10px;padding:1.2rem;box-shadow:0 2px 6px rgba(0,0,0,.08)}
.full-span{grid-column:1/-1}
h2{margin:0 0 .8rem;color:var(--primary);font-size:1.1rem}
.field{display:flex;flex-direction:column;margin-bottom:.7rem}
label{font-size:.88rem;margin-bottom:.2rem}
input,select,textarea{padding:.45rem;border-radius:6px;border:1px solid var(--border);font-size:.9rem}
button{background:var(--primary);color:#fff;border:none;border-radius:6px;padding:.55rem 1rem;cursor:pointer}
.danger{background:#fdecea;border-left:4px solid var(--danger);padding:.7rem 1rem;margin-bottom:1rem;color:var(--danger);font-weight:600}
.warn{background:#fff3cd;border-left:4px solid #ff9800;padding:.6rem;margin-top:.6rem}
</style>
</head>

<body>
<header>Levofloxacin Adult & Pediatric Dosing + PK Calculator</header>

<div class="grid">

<!-- PATIENT DATA -->
<section class="card">
<h2>Patient Data</h2>
<div class="field"><label>Age (years)</label><input id="age" type="number"></div>
<div class="field"><label>Sex</label>
<select id="sex">
<option value="">Select</option>
<option value="M">Male</option>
<option value="F">Female</option>
</select></div>
<div class="field"><label>Weight (kg)</label><input id="tbw" type="number"></div>
<div class="field"><label>Height (cm)</label><input id="height" type="number"></div>
<div class="field"><label>Serum Creatinine (mg/dL)</label><input id="scr" step="0.01"></div>
</section>

<!-- PEDIATRIC -->
<section id="pedCard" class="card full-span" style="display:none">
<div class="danger">
Levofloxacin is NOT recommended in patients &lt;16 years except for FDA-approved indications
(inhalational anthrax, plague) or when no safer alternatives exist.
</div>

<div class="warn">
<strong>Important:</strong> Renal function–based dose adjustment is NOT routinely recommended
for pediatric levofloxacin use. Dosing is strictly weight-based.
</div>

<h2>Pediatric Dosing</h2>
<div class="field"><label>Indication</label>
<select id="pedInd">
<option value="">Select</option>
<option value="anthrax">Inhalational Anthrax</option>
<option value="plague">Plague</option>
<option value="override">Override (No safer alternative)</option>
</select></div>

<div class="field"><label>Override justification (required if override)</label>
<textarea id="pedJust"></textarea></div>

<button id="calcPed">Calculate Pediatric Dose</button>

<hr>
<div><strong>Dose:</strong> <span id="pedDose">–</span></div>
<div><strong>Interval:</strong> q12h</div>
<div><strong>Duration:</strong> <span id="pedDur">–</span></div>

<pre id="pedSummary">—</pre>
</section>

<!-- ADULT A -->
<section id="adultA" class="card">
<h2>Adult Indication</h2>
<select id="adultInd">
<option value="cap500">CAP 500 mg</option>
<option value="cap750">CAP 750 mg</option>
<option value="hap">HAP/VAP 750 mg</option>
<option value="abecb">ABECB 500 mg</option>
<option value="sinus500">Sinusitis 500 mg</option>
<option value="sinus750">Sinusitis 750 mg</option>
<option value="cuti750">cUTI 750 mg</option>
<option value="cuti250">cUTI 250 mg</option>
<option value="apy750">Pyelonephritis 750 mg</option>
<option value="apy250">Pyelonephritis 250 mg</option>
<option value="uuti">Uncomplicated UTI 250 mg</option>
<option value="prost">Prostatitis 500 mg</option>
<option value="csssi">cSSSI 750 mg</option>
<option value="usssi">uSSSI 500 mg</option>
</select>
<div class="field"><label>Custom Dose (mg)</label><input id="adultCustom"></div>
</section>

<!-- ADULT B -->
<section id="adultB" class="card">
<h2>Renal Function (Adults Only)</h2>
<div class="field">
<label>Creatinine Clearance (mL/min)</label>
<input id="crcl" readonly>
<small>Automatically calculated (Cockcroft–Gault)</small>
</div>
</section>

<!-- ADULT C -->
<section id="adultC" class="card">
<h2>Adult PK Output</h2>
<button id="calcAdult">Calculate PK</button>
<hr>
<div>Vd: <span id="aVd">–</span></div>
<div>CL: <span id="aCl">–</span></div>
<div>ke: <span id="aKe">–</span></div>
<div>t½: <span id="aT">–</span></div>
<div>AF: <span id="aAF">–</span></div>
<div>Cmax: <span id="aCmax">–</span></div>
<div>Cmin: <span id="aCmin">–</span></div>
<div>AUC24: <span id="aAUC">–</span></div>
<div>Expected AUC: <span id="aExp">–</span></div>
<div id="adultWarn"></div>
</section>

</div>

<script>
/* MODE SWITCH */
age.addEventListener('input',()=>{
  const isPed = +age.value < 16;
  pedCard.style.display = isPed ? 'block' : 'none';
  adultA.style.display = adultB.style.display = adultC.style.display = isPed ? 'none' : 'block';
});

/* ADULT CrCl – Cockcroft–Gault ONLY */
function calcCrCl(){
  if(+age.value < 16){ crcl.value=''; return; }
  const wt=+tbw.value, scrV=+scr.value, sx=sex.value;
  if(!wt||!scrV||!sx) return;
  let cr=((140-+age.value)*wt)/(72*scrV);
  if(sx==='F') cr*=0.85;
  crcl.value=cr.toFixed(1);
}
['age','tbw','scr','sex'].forEach(i=>document.getElementById(i).addEventListener('input',calcCrCl));

/* PEDIATRIC */
calcPed.onclick=()=>{
  if(+age.value>=16) return;
  const wt=+tbw.value;
  if(!wt) return alert('Weight required');
  if(pedInd.value==='override' && pedJust.value.trim().length<5)
    return alert('Justification required');
  const dose=Math.min(250,Math.round((8*wt)/25)*25);
  pedDose.textContent=dose+' mg';
  pedDur.textContent=pedInd.value==='anthrax'?'60 days':'10–14 days';
  pedSummary.textContent=`Dose: ${dose} mg q12h\nRenal adjustment: Not required`;
};

/* ADULT PK */
calcAdult.onclick=()=>{
  if(+age.value<16) return;
  const wt=+tbw.value, cr=+crcl.value;
  if(!wt||!cr) return alert('Missing data');
  const map={cap500:500,cap750:750,hap:750,abecb:500,sinus500:500,sinus750:750,
             cuti750:750,cuti250:250,apy750:750,apy250:250,uuti:250,prost:500,
             csssi:750,usssi:500};
  const dose=+adultCustom.value||map[adultInd.value];
  const vd=1.1*wt, cl=0.065*cr+0.284, ke=cl/vd;
  aVd.textContent=vd.toFixed(1)+' L';
  aCl.textContent=cl.toFixed(2)+' L/h';
  aKe.textContent=ke.toFixed(3);
  aT.textContent=(0.693/ke).toFixed(1)+' h';
  aAF.textContent=(1/(1-Math.exp(-ke*24))).toFixed(2);
  const cmax=(dose/(ke*vd))*(1-Math.exp(-ke));
  aCmax.textContent=cmax.toFixed(1);
  aCmin.textContent=(cmax*Math.exp(-ke*23)).toFixed(2);
  const auc=dose/cl;
  aAUC.textContent=auc.toFixed(1);
  aExp.textContent=dose===500?'50–70':dose===750?'90–120':'—';
};
</script>

</body>
</html>
